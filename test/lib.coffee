assert = require 'assert'
extractDate = require '../src/lib/extract_date'
utils = require '../src/lib/utils'

titles = [ { title: 'PHISH Reba Comcast Center Hartford CT. 6/18/2010', match: { month: 6, day: 18, year: 2010 } }, { title: 'Phish - Destiny Unbound 1991 Telluride', match: undefined }, { title: 'Phish 2010-12-30 Harry Hood', match: { month: 12, day: 30, year: 2010 } }, { title: 'Phish - Harry Hood - December 30, 1991', match: { month: 12, day: 30, year: 1991 } }, { title: 'Phish - It\'s Ice - October 30th, 1991', match: { month: 10, day: 30, year: 1991 } }, { title: 'PHISH - 1.30.91 BOUNCING AROUND THE ROOM', match: { month: 1, day: 30, year: 1991 } }, { title: 'PHISH - 2 30 91 Harry Hood', match: { month: 2, day: 30, year: 1991 } }, { title: 'PHISH - 3/22/91 It\'s ICE', match: { month: 3, day: 22, year: 1991 } }, { title: 'Phish - My Sweet One/Horn - November 31st, 1991', match: { month: 11, day: 31, year: 1991 } }, { title: 'PHISH - 11/30/83 HORN', match: { month: 11, day: 30, year: 1983 } }, { title: 'Phish/Worcester,MA 12-31-91 "Llama" (photo montage)', match: { month: 12, day: 31, year: 1991 } }, { title: 'Phish 1991.11.30 My Sweet One, Port Chester, NY', match: { month: 11, day: 30, year: 1991 } }, { title: 'Cavern - Phish', match: undefined }, { title: 'Phish -- Suzy Greenberg 2/25/93', match: { month: 2, day: 25, year: 1993 } }, { title: 'Phish - David Bowie 2-25-93', match: { month: 2, day: 25, year: 1993 } }, { title: 'PHISH - 02 - Fast Enough For You', match: undefined }, { title: 'Phish 1993 2 25 If I Only Had a Brain w/ Mimi on Vac', match: { month: 2, day: 25, year: 1993 } }, { title: 'Phish-Good Times Bad Times, 1995/2/25', match: { month: 2, day: 25, year: 1995 } }, { title: 'Phish Foam Madison Square Garden 01/01/2011 [HD iPhone]', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: Foam [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | Foam', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: Tube / Runaway Jim [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish "Runaway Jim" @ MSG on January 1, 2011', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | Runaway Jim', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish My Soul Madison Square Garden 01/01/11 [HD]', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | My Soul', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: My Soul [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | Tube', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: Tube / Runaway Jim [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: Guelah Papyrus [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | Guelah Papyrus', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish Reba Madison Square Garden 01/01/11 [HD]', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: Reba [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | Reba', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish "Reba, pt.1" 11/1/09 @ Festival 8, Indio', match: { month: 11, day: 1, year: 2009 } }, { title: 'Phish \'Reba\' 1.1.11 MSG - New Years Day', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish | 01.01.11 | Gotta Jibboo', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish: Gotta Jibboo [HD] 2011-01-01 - New York, NY', match: { month: 1, day: 1, year: 2011 } }, { title: 'Phish~ 08.08.93 "Loving Cup" Nautica Cleveland OH', match: { month: 8, day: 8, year: 1993 } }, { title: 'Phish 107 Sun 8-8-1993 Nautica Stage Cle OH Punch you in the Eye.mpg', match: { month: 8, day: 8, year: 1993 } }, { title: 'Phish - 1993-08-08 Fast Enough for You', match: { month: 8, day: 8, year: 1993 } }, { title: 'Phish 111 A Sun 8-8-1993 Nautica Stage Cle OH David Bowie.wmv', match: { month: 8, day: 8, year: 1993 } }, { title: 'Phish 1993-08-08 Harry Hood Part 2', match: { month: 8, day: 8, year: 1993 } }, { title: 'Phish 1993-08-08 Harry Hood Part 1', match: { month: 8, day: 8, year: 1993 } }, { title: 'Phish - Esther 1993-08-11', match: { month: 8, day: 11, year: 1993 } }, { title: 'Phish - Bold As Love - 8 - 11 - 1993 - Remastered Audio', match: { month: 8, day: 11, year: 1993 } }, { title: 'Phish - Purple Rain 8-14-93', match: { month: 8, day: 14, year: 1993 } }, { title: 'PHISH - 08 - My Friend, My Friend', match: undefined }, { title: 'Phish Foam (live) 12.29.93', match: { month: 12, day: 29, year: 1993 } }, { title: 'Phish - Stash (Live) 12.29.93', match: { month: 12, day: 29, year: 1993 } }, { title: 'Phish 1993-12-29 Big Ball Jam - HYHU - If I Only Had a Brain', match: { month: 12, day: 29, year: 1993 } }, { title: 'Phish 1993-12-29 Big Ball Jam - HYHU - If I Only Had a Brain', match: { month: 12, day: 29, year: 1993 } }, { title: 'TREY ANASTASIO SHREDDING (Down with Disease jam, 12/31/1993)', match: { month: 12, day: 31, year: 1993 } }, { title: 'You Enjoy Myself part 2', match: undefined }, { title: 'Phish: Tweezer Jam 6.1.2011 - Holmdel, NJ', match: { month: 6, day: 1, year: 2011 } }, { title: 'Phish: Seven Below [HD] 2011-06-01 - Holmdel, NJ', match: { month: 6, day: 1, year: 2011 } }, { title: 'Phish - 06.13.94 - Buried Alive - Poor Heart - Sample In a Jar', match: { month: 6, day: 13, year: 1994 } }, { title: 'Phish - 06.13.94 - Buried Alive - Poor Heart - Sample In a Jar', match: { month: 6, day: 13, year: 1994 } }, { title: 'Testing 4/12-97 In a Jar', match: { month: 12, day: 4, year: 1997 } } ]

obj = {hello:'world',my:'name',is:'daniel'}

describe "Extract date", ->
  it "matches", ->
    for i of titles
      title = titles[i]
      out = extractDate title.title
      match = title.match

      if out && match
        assert.equal out.month, match.month
        assert.equal out.day, match.day
        assert.equal out.year, match.year
      else
        assert.equal out, match

describe "utils", ->
  it "on server", ->
    assert.ok utils.onServer()
  it "is not client", ->
    assert.ok !utils.onClient()
  it "to param", ->
    out = utils.toParam obj
    assert.equal out, 'hello=world&my=name&is=daniel'
